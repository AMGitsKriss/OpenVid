@model OpenVid.Models.Upload.UploadViewModel


<div class="container">
    <div class="row">
        <div class="col-2 border-right">
            SIDEBAR
        </div>
        <div class="col-10">
            <div id="uploadForm">
                <input type="file" name="file" multiple />
                <script>
                    $(document).on('change', '#uploadForm>input', function (e) {
                        var fileUpload = $("#uploadForm>input").get(0);
                        var files = fileUpload.files;
                        var multipleFiles = files.length > 1;
                        var promises = [];

                        for (var i = 0; i < files.length; i++) {
                            var formData = new FormData();
                            formData.append('file', files[i]);
                            formData.append('multipleFiles', multipleFiles);

                            promises.push($.ajax({
                                type: 'POST',
                                url: '@Url.Action("Upload", "Upload")',
                                data: formData,
                                processData: false,
                                contentType: false,
                                success: function (data) {
                                    $('#updateForm').append(data);
                                },
                                error: function (error) {
                                    //stub
                                }
                            }));
                        }
                        Promise.all(promises);
                    });
                </script>
            </div>

            <hr />

            <div id="updateForm"></div>
        </div>
    </div>
</div>